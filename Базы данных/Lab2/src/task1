CREATE TABLE IF NOT EXISTS public.house
(
    id bigserial NOT NULL PRIMARY KEY,
    address character varying(256) NOT NULL
);

CREATE TABLE IF NOT EXISTS public.work
(
    id bigserial NOT NULL PRIMARY KEY,
    house_id bigint NOT NULL,
    name character varying(256) NOT NULL,
	CONSTRAINT fk_work_house_id FOREIGN KEY (house_id)
		REFERENCES public.house (id)
);

CREATE TABLE IF NOT EXISTS public.contractor
(
    id bigserial NOT NULL PRIMARY KEY,
    name character varying(256) NOT NULL,
    specialization character varying(256) NOT NULL
);

CREATE TABLE IF NOT EXISTS public.work_contractor
(
    id bigserial NOT NULL PRIMARY KEY,
    work_id bigint NOT NULL,
    contractor_id bigint NOT NULL,
    CONSTRAINT fk_work_contractor_work_id FOREIGN KEY (work_id)
    	REFERENCES public.work (id),
	CONSTRAINT fk_work_contractor_contractor_id FOREIGN KEY (contractor_id)
    	REFERENCES public.contractor (id)
);

CREATE TABLE IF NOT EXISTS public.resident
(
    id bigserial NOT NULL PRIMARY KEY,
    name character varying(256) NOT NULL,
    room bigint NOT NULL,
    house_id bigint NOT NULL,
    CONSTRAINT fk_resident_house_id FOREIGN KEY (house_id)
    	REFERENCES public.house (id)
);

CREATE TABLE IF NOT EXISTS public.bill
(
    id bigserial NOT NULL PRIMARY KEY,
    amount bigint NOT NULL,
    bill_date date NOT NULL,
    resident_id bigint NOT NULL,
	CONSTRAINT fk_bill_resident_id FOREIGN KEY (resident_id)
    	REFERENCES public.resident (id)
);

CREATE TABLE IF NOT EXISTS public.payment
(
    id bigserial NOT NULL PRIMARY KEY,
    amount bigint NOT NULL,
    payment_date date NOT NULL,
    bill_id bigint NOT NULL,
	CONSTRAINT fk_payment_bill_id FOREIGN KEY (bill_id)
    	REFERENCES public.bill (id)
);